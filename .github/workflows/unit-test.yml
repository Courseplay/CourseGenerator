# The workflow name
name: Run unit tests

on:
  push:
    paths:
      - '**.lua'
  pull_request:
    paths:
      - '**.lua'
  workflow_dispatch:

# The list of jobs this workflow executes
jobs:
  test:
    runs-on: windows-latest
    steps:
      - name: Checkout this repository
        uses: actions/checkout@v3
        # we need some base classes from the Courseplay repo
      - name: Checkout Courseplay repository
        uses: actions/checkout@v3
        with:
          repository: Courseplay/Courseplay_FS22
          path: Courseplay_FS22
      - name: Setup Lua
        uses: xpol/setup-lua@v0.3
      - name: Run unit tests
        run: |
          cd CourseGenerator/test
          lua WrapAroundIndexTest.lua
          lua LineSegmentTest.lua
          lua VertexTest.lua
          lua SliderTest.lua
          lua TransformTest.lua
          lua PolylineTest.lua
          lua PolygonTest.lua
          lua FieldTest.lua
          lua FieldworkCourseTest.lua

